<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="styles.css">
        <title>Winch Controller</title>
    </head>
    <body>
        <main>
            <div class="arrow-wrap">
                <svg class="up-arrow" version="1.0" xmlns="http://www.w3.org/2000/svg"
                width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"
                preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    fill="#000000" stroke="none">
                        <path d="M2460 3939 c-35 -15 -304 -279 -1223 -1197 -648 -647 -1189 -1196
                        -1203 -1218 -56 -95 -38 -211 46 -295 29 -29 63 -52 86 -58 55 -15 4733 -15
                        4788 0 23 6 57 29 86 58 84 84 102 200 46 295 -14 22 -555 571 -1203 1218
                        -919 918 -1188 1182 -1223 1197 -28 13 -66 21 -100 21 -34 0 -72 -8 -100 -21z"/>
                    </g>
                    <text x="50%" y="55%" dominant-baseline="middle" fill="#ffffff" font-size="150" text-anchor="middle">+</text>
                </svg>
    
                <svg class="down-arrow" version="1.0" xmlns="http://www.w3.org/2000/svg"
                width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"
                preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    fill="#000000" stroke="none">
                        <path d="M161 3949 c-18 -6 -54 -31 -81 -58 -84 -84 -102 -200 -46 -295 14
                        -22 555 -571 1203 -1218 919 -918 1188 -1182 1223 -1197 59 -27 141 -27 200 0
                        35 15 304 279 1223 1197 648 647 1189 1196 1203 1218 56 95 38 211 -46 295
                        -29 29 -63 52 -86 58 -51 14 -4743 14 -4793 0z"/>
                    </g>
                    <text x="50%" y="55%" dominant-baseline="middle" fill="#ffffff" font-size="150" text-anchor="middle">-</text>
                </svg>
            </div>

            <input id="speed" type="number" readonly value="0.0">

        </main>
        <script>
            // Winch speed value (private)
            let _speed = 0;

            // Getters and setters for speed property
            Object.defineProperty(window, 'speed', {
                get: function () {return _speed;},
                set: function (value) {
                    // Change private property (withing range)
                    if (value < -10) _speed = -10;
                    else if (value > 10) _speed = 10;
                    else _speed = value;

                    // Update input element in html
                    const input = document.querySelector('#speed');
                    input.value = _speed.toFixed(1);
                }
            });

            const upArrow = document.querySelector('.up-arrow');
            const downArrow = document.querySelector('.down-arrow');

            // Click on up-arrow
            upArrow.addEventListener('click', () => arrowClick(true));

            // Hold-click on up-arrow
            upArrow.addEventListener('mousedown', () => arrowHold(true));

            // Click on down-arrow
            downArrow.addEventListener('click', () => arrowClick(false));

            // Hold-click on down-arrow
            downArrow.addEventListener('mousedown', () => arrowHold(false));

            function arrowClick(direction) {
                speed += direction ? 0.2 : -0.2;
            }

            function arrowHold(direction) {
                interval = setInterval(() => speed += direction ? 1.0 : -1.0, 500);
                document.body.addEventListener('mouseup', () => {
                    clearInterval(interval);
                });
            }

        </script>
    </body>
</html>